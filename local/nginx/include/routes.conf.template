limit_req zone=global_rate burst=100 nodelay;

location / {
    root /etc/nginx/html;
    error_page 404 /404;
    error_page 500 502 503 504 /50x;
}

limit_req_status 429;
error_page 429 /429.json;
location /429.json {
    add_header Content-Type application/json;
    return 429 '{"error": {"status_code": 429,"status": "Too Many Requests"}}';
}

include /etc/nginx/include/content.conf;
include /etc/nginx/include/comms.conf;
include /etc/nginx/include/lambdas.conf;
